var bevey=bevey||(function(){return{version:"4.1.11",cssRoot:"css/",debug:true,insertFirst:function(elm,parent){parent.insertBefore(elm,parent.firstChild)},cancelBubble:function(e){e=e||window.event;e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}},cancelLink:function(elm){var tagName=elm.nodeName.toLowerCase(),event;if(tagName==="a"){event="click"}else{if(tagName==="form"){event="submit"}}if(event){bevey.event.add(elm,event,function(e){if(e.preventDefault){e.preventDefault()}return false})}else{bevey.event.add(elm,"click",function(e){var elm=bevey.getTarget(e);if(elm.nodeName.toLowerCase()!=="a"){elm=bevey.getTarget(e)}if(e.preventDefault){e.preventDefault()}return false})}},isChildOf:function(child,ancestor){if(ancestor===child){return false}while((child)&&(child!==ancestor)&&(child!==document.body)){child=child.parentNode}return child===ancestor},event:{list:[],add:function(elm,event,action,capture){capture=capture||false;var mouseEnter=function(action){return function(e){var target=e.relatedTarget;if((this===target)||(bevey.isChildOf(target,this))){return}action.call(this,event)}};if(elm.addEventListener){if(event==="mouseenter"){action=mouseEnter(action);elm.addEventListener("mouseover",action,capture);event="mouseover"}else{if(event==="mouseleave"){action=mouseEnter(action);elm.addEventListener("mouseout",action,capture);event="mouseout"}else{elm.addEventListener(event,action,capture)}}}else{if(elm.attachEvent){elm.attachEvent("on"+event,action)}else{elm["on"+event]=action}}bevey.event.list.push([elm,event,action])},remove:function(elm,event,action,capture){capture=capture||false;var i=0;if(event==="mouseenter"){event="mouseover"}else{if(event==="mouseleave"){event="mouseout"}}if(elm.removeEventListener){elm.removeEventListener(event,action,capture)}else{if(elm.detachEvent){elm.detachEvent("on"+event,action)}else{elm["on"+event]=null}}for(i;i<bevey.event.list.length;i+=1){if(bevey.event.list[i]){if((bevey.event.list[i])&&(bevey.event.list[i][0]===elm)&&(bevey.event.list[i][1]===event)&&(bevey.event.list[i][2]===action)){bevey.event.list.splice(i,1);break}}}},removeAll:function(elm){elm=elm||document;var i=bevey.event.list.length-1;for(i;i>=0;i-=1){if(bevey.event.list[i]){if((bevey.event.list[i])&&((bevey.event.list[i][0]===elm)||(elm===document))){bevey.event.remove(bevey.event.list[i][0],bevey.event.list[i][1],bevey.event.list[i][2])}}}}},closure:function(elm,action){return function(e){action(elm)}},getTarget:function(e){e=e||window.event;if(e.target){return e.target}else{return e.srcElement}},hasAttribute:function(elm,attribute,value){if(elm[attribute]){return elm[attribute].match(new RegExp("(\\s|^)"+value+"(\\s|$)"))}},hasClass:function(elm,className){return bevey.hasAttribute(elm,"className",className)},addClass:function(elm,className){if(!bevey.hasClass(elm,className)){elm.className=bevey.trim(elm.className+" "+className)}},removeClass:function(elm,className){if(bevey.hasClass(elm,className)){elm.className=elm.className.replace(new RegExp("(\\s|^)"+className+"(\\s|$)")," ");elm.className=bevey.trim(elm.className)}},toggleClass:function(elm,className){if(!bevey.hasClass(elm,className)){bevey.addClass(elm,className)}else{bevey.removeClass(elm,className)}},getElementsByClassName:function(className,parent,tag){var elementsWithClass=[],children=[],i=0,j=0;parent=parent||document;tag=tag.toLowerCase()||"*";if((tag==="*")&&(document.getElementsByClassName)){return parent.getElementsByClassName(className)}if(parent.getElementsByClassName){children=parent.getElementsByClassName(className);if((tag)&&(children.length)){for(i in children){if((children[i].tagName)&&(children[i].tagName.toLowerCase()===tag)){elementsWithClass[j]=children[i];j+=1}}}else{elementsWithClass=children}}else{children=parent.getElementsByTagName(tag);for(i in children){if(bevey.hasClass(children[i],className)){elementsWithClass[j]=children[i];j+=1}}}return elementsWithClass},removeChildren:function(elm){if(elm.hasChildNodes()){while(elm.childNodes.length>0){bevey.event.removeAll(elm.firstChild);elm.removeChild(elm.firstChild)}}},getText:function(elm){if(elm.textContent){return elm.textContent}else{if(elm.innerText){return elm.innerText}else{if(elm.text){return elm.text}else{return elm.innerHTML}}}},putText:function(elm,text){if(elm.textContent){elm.textContent=text}else{if(elm.innerText){elm.innerText=text}else{if(elm.text){elm.text=text}else{elm.innerHTML=text}}}},stripUnits:function(property){if(typeof(property)==="string"){return parseInt(property.replace(new RegExp("(%|px|em)"),""),10)}else{return property}},trim:function(string){string=string||"";return string.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")},readCookie:function(variable){var values=document.cookie.split(";"),value="",i=0;for(i;i<values.length;i+=1){value=values[i].split("=");if(bevey.trim(value[0])===variable){return bevey.trim(value[1])}}},loadAsset:function(asset){asset.type=asset.type||"css";asset.onComplete=asset.onComplete||function(){};if(asset.address){var head=document.getElementsByTagName("head")[0],file;if(asset.type==="css"){file=document.createElement("link");file.type="text/css";file.rel="stylesheet";file.href=asset.address;file.media=asset.media||"all";head.appendChild(file);asset.onComplete()}else{if(asset.type==="js"){file=document.createElement("script");bevey.event.add(file,"load",function(){asset.onComplete()});file.type="text/javascript";file.src=asset.address;head.appendChild(file)}}}},log:function(text,type){if(bevey.debug===true){var asset,wrapper,title,logger,message,input,inputBuffer=[],inputIndex=0,tempBuffer="",drag;if(!document.getElementById("logger-console")){asset={type:"css",address:bevey.cssRoot+"logger.css"};bevey.loadAsset(asset);wrapper=document.createElement("form");title=document.createElement("h4");logger=document.createElement("ol");input=document.createElement("input");wrapper.id="logger-console";bevey.putText(title,"Log Console");input.type="text";wrapper.appendChild(title);wrapper.appendChild(logger);wrapper.appendChild(input);document.body.appendChild(wrapper);bevey.event.add(input,"keyup",function(e){if(e.keyCode===38){if(inputIndex===inputBuffer.length){tempBuffer=this.value}if(inputIndex>0){inputIndex-=1;this.value=inputBuffer[inputIndex]}}else{if(e.keyCode===40){if(inputBuffer.length>inputIndex){inputIndex+=1;if(inputBuffer[inputIndex]){this.value=inputBuffer[inputIndex]}else{this.value=tempBuffer}}}}});bevey.event.add(wrapper,"submit",function(e){if(input.value==="clear"){bevey.removeChildren(logger)}else{if(input.value==="exit"){this.style.display="none"}else{bevey.log(input.value);try{if(window.execScript){window.execScript(input.value)}else{window.setTimeout(input.value,0)}}catch(error){bevey.log(error,"error")}}}inputIndex=inputBuffer.length+1;inputBuffer.push(input.value);input.value="";if(e.preventDefault){e.preventDefault()}return false});drag={elm:wrapper,dragElm:title};bevey.clickDrag(drag)}else{logger=document.getElementById("logger-console");logger.style.display="block";logger=logger.getElementsByTagName("ol")[0]}message=document.createElement("li");if(type){bevey.addClass(message,type)}if(text.tagName){bevey.event.add(message,"mouseenter",function(){if(typeof(text.style.outline)==="string"){text.style.outline="3px solid #FF0000"}else{text.style.border="1px solid #FF0000"}});bevey.event.add(message,"mouseleave",function(){if(typeof(text.style.outline)==="string"){text.style.outline="none"}else{text.style.border="none"}})}bevey.putText(message,text);logger.appendChild(message);logger.scrollTop=logger.scrollHeight}if(typeof(console)!=="undefined"){console.log(text)}},findRgb:function(rgb){if(typeof(rgb)==="string"){rgb=rgb.replace("rgb(","").replace(")","");rgb=rgb.split(",");for(var i=0;i<rgb.length;i+=1){rgb[i]=parseInt(bevey.trim(rgb[i]),10)}}return rgb},rgbToHex:function(rgb){rgb=bevey.findRgb(rgb);for(var i=0;i<rgb.length;i+=1){rgb[i]="0123456789ABCDEF".charAt((rgb[i]-rgb[i]%16)/16)+"0123456789ABCDEF".charAt(rgb[i]%16)}return("#"+rgb[0]+rgb[1]+rgb[2])},hexToRgb:function(hex){var hexStr=hex.replace("#","");hex=[hexStr.substring(0,2),hexStr.substring(2,4),hexStr.substring(4,6)];return"rgb("+parseInt(hex[0],16)+", "+parseInt(hex[1],16)+", "+parseInt(hex[2],16)+")"},findStyle:function(elm,property){var styleValue="";if(elm.currentStyle){property=property.replace(/-\w/g,function(match){return match.charAt(1).toUpperCase()});if((property==="opacity")&&(elm.filters)){if(!elm.style.filter){return 1}return parseInt(elm.filters.item("alpha").opacity,10)/100}styleValue=elm.currentStyle[property]}else{if(window.getComputedStyle){styleValue=document.defaultView.getComputedStyle(elm,null).getPropertyValue(property)}else{return 0}}if(styleValue){if((property.indexOf("color")!==-1)&&(styleValue.indexOf("rgb")!==-1)){styleValue=bevey.rgbToHex(styleValue)}if((styleValue.indexOf("px")!==-1)||(styleValue.indexOf("em")!==-1)||(styleValue.indexOf("%")!==-1)){styleValue=bevey.stripUnits(styleValue)}if(property==="opacity"){styleValue=parseFloat(styleValue,10)}}return styleValue},findScroll:function(){if(typeof(window.pageYOffset)==="number"){return{positionX:window.pageXOffset,positionY:window.pageYOffset}}else{if((document.body)&&(document.body.scrollTop)){return{positionX:document.body.scrollWidth,positionY:document.body.scrollTop}}else{if((document.documentElement)&&(document.documentElement.scrollTop)){return{positionX:document.documentElement.scrollWidth,positionY:document.documentElement.scrollTop}}}}return 0},findDocumentHeight:function(){return Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight))},totalOffset:function(elm,relative){var offsetX=0,offsetY=0,parentPosition;if(elm.offsetParent){offsetX=elm.offsetLeft;offsetY=elm.offsetTop;while(elm.offsetParent){elm=elm.offsetParent;if(relative){parentPosition=bevey.findStyle(elm,"position");if((parentPosition==="absolute")||(parentPosition==="relative")){break}}offsetX+=elm.offsetLeft;offsetY+=elm.offsetTop}}return{offsetX:offsetX,offsetY:offsetY}},setOpacity:function(elm,opacity){if(typeof(elm.style.opacity)!=="undefined"){elm.style.opacity=opacity}else{if(typeof(elm.style.MozOpacity)!=="undefined"){elm.style.MozOpacity=opacity}else{if(typeof(elm.style.KhtmlOpacity)!=="undefined"){elm.style.KhtmlOpacity=opacity}else{if(elm.style.filter!=="undefined"){if(opacity===1){elm.style.filter=""}else{elm.style.filter="alpha(opacity="+Math.ceil(opacity*100)+")"}}else{if(elm.style.visibility==="hidden"){elm.style.visibility="visible"}else{elm.style.visibility="hidden"}}}}}},animate:function(animation){var thisStep=0,fauxStart,fauxEnd,deltas,findChange,callBack;findChange=function(start,step,totalSteps,delta,end,ease){var change;switch(ease){case"ease-in":change=parseFloat(start,10)+(Math.pow(((1/totalSteps)*step),1.25)*(end-start));break;case"ease-out":change=parseFloat(start,10)+(Math.pow(((1/totalSteps)*step),0.5)*(end-start));break;case"ease-in-out":if(step<(totalSteps/2)){change=parseFloat(start,10)+(Math.pow(((1/totalSteps)*step),1.25)*(end-start))}else{change=parseFloat(start,10)+(Math.pow(((1/totalSteps)*step),0.5)*(end-start))}break;default:change=parseFloat(start,10)+(step*delta);break}if(step!==totalSteps){if(animation.property.indexOf("color")!==-1){change=Math.max(0,change);change=Math.min(255,change);change=Math.round(change)}return change}return end};if(!animation.stepIndex){fauxStart=animation.start;fauxEnd=animation.end;if((animation.start<=1)&&(animation.end<=1)){fauxStart=fauxStart*100;fauxEnd=fauxEnd*100}if(bevey.hasClass(animation.elm,"animating")){return false}if(animation.start===null){animation.start=bevey.findStyle(animation.elm,animation.property)}animation.elm=animation.elm||this;animation.duration=animation.duration||1000;animation.ease=animation.ease||"linear";animation.noNative=animation.noNative||false;animation.interval=animation.interval||50;animation.stepIndex=0;animation.onStart=animation.onStart||function(){};animation.onComplete=animation.onComplete||function(){};if(animation.hideIfNeeded!==false){animation.hideIfNeeded=true}if((!animation.onTween)&&(!animation.noNative)){if((typeof(animation.elm.style["-moz-transition"])!=="undefined")||(typeof(animation.elm.style["-ms-transition"])!=="undefined")||(typeof(animation.elm.style["-o-transition"])!=="undefined")||(typeof(animation.elm.style["-webkit-transition"])!=="undefined")||(typeof(animation.elm.style.transition)!=="undefined")){animation.elm.style["-moz-transition"]=animation.property+" "+(animation.duration/1000)+"s "+animation.ease;animation.elm.style["-ms-transition"]=animation.property+" "+(animation.duration/1000)+"s "+animation.ease;animation.elm.style["-o-transition"]=animation.property+" "+(animation.duration/1000)+"s "+animation.ease;animation.elm.style["-webkit-transition"]=animation.property+" "+(animation.duration/1000)+"s "+animation.ease;animation.elm.style.transition=animation.property+" "+(animation.duration/1000)+"s "+animation.ease;bevey.addClass(animation.elm,"animating");animation.onStart();if((animation.elm.style.display==="none")&&(animation.end>0)){animation.elm.style.display="block"}callBack=function(){bevey.removeClass(animation.elm,"animating");if((animation.hideIfNeeded)&&(animation.end<=0)&&(animation.property!=="left")&&(animation.property!=="right")&&(animation.property!=="botom")&&(animation.property!=="top")){animation.elm.style.display="none"}animation.onComplete();bevey.event.remove(animation.elm,"mozTransitionEnd",callBack);bevey.event.remove(animation.elm,"webkitTransitionEnd",callBack);bevey.event.remove(animation.elm,"transitionEnd",callBack)};bevey.event.add(animation.elm,"mozTransitionEnd",callBack);bevey.event.add(animation.elm,"webkitTransitionEnd",callBack);bevey.event.add(animation.elm,"transitionEnd",callBack);if(animation.property==="opacity"){bevey.setOpacity(animation.elm,animation.end)}else{if((animation.property==="background-color")||(animation.property==="color")){animation.elm.style[animation.property]=animation.end}else{animation.elm.style[animation.property]=animation.end+"px"}}return}}animation.onTween=animation.onTween||function(){};if((animation.property.indexOf("color")!==-1)){animation.start=bevey.findRgb(bevey.hexToRgb(animation.start));animation.end=bevey.findRgb(bevey.hexToRgb(animation.end));deltas=[(animation.end[0]-animation.start[0]),(animation.end[1]-animation.start[1]),(animation.end[2]-animation.start[2])];animation.steps=Math.abs(Math.floor(Math.min(Math.max(deltas[0],deltas[1],deltas[2]),Math.ceil(animation.duration/animation.interval))));animation.stepDelta=[Math.ceil(deltas[0]/animation.steps),Math.ceil(deltas[1]/animation.steps),Math.ceil(deltas[2]/animation.steps)]}else{animation.steps=Math.floor(Math.min(Math.abs(fauxEnd-fauxStart),Math.ceil(animation.duration/animation.interval)));animation.stepDelta=(fauxEnd-fauxStart)/animation.steps}if((animation.start<=1)&&(animation.end<=1)){animation.stepDelta=animation.stepDelta/100}bevey.addClass(animation.elm,"animating");animation.onStart()}animation.stepIndex+=1;thisStep=findChange(animation.start,animation.stepIndex,animation.steps,animation.stepDelta,animation.end,animation.ease);if(animation.stepIndex>=animation.steps){animation.stepIndex=animation.steps;thisStep=animation.end}if(animation.start>animation.end){if(thisStep<=animation.end){animation.stepIndex=animation.steps;thisStep=animation.end}if((animation.hideIfNeeded)&&(animation.start+(animation.stepIndex*animation.stepDelta)<=0)&&(animation.property!=="left")&&(animation.property!=="right")&&(animation.property!=="botom")&&(animation.property!=="top")&&(animation.property.indexOf("background")===-1)){animation.elm.style.display="none"}}else{if(thisStep>=animation.end){animation.stepIndex=animation.steps;thisStep=animation.end}if((animation.elm.style.display==="none")&&(animation.end>0)){animation.elm.style.display="block"}}switch(animation.property){case"opacity":bevey.setOpacity(animation.elm,thisStep);break;case"background-color":animation.elm.style.backgroundColor=bevey.rgbToHex([findChange(animation.start[0],animation.stepIndex,animation.steps,animation.stepDelta[0],animation.end[0],animation.ease),findChange(animation.start[1],animation.stepIndex,animation.steps,animation.stepDelta[1],animation.end[1],animation.ease),findChange(animation.start[2],animation.stepIndex,animation.steps,animation.stepDelta[2],animation.end[2],animation.ease)]);break;case"color":animation.elm.style.color=bevey.rgbToHex([findChange(animation.start[0],animation.stepIndex,animation.steps,animation.stepDelta[0],animation.end[0],animation.ease),findChange(animation.start[1],animation.stepIndex,animation.steps,animation.stepDelta[1],animation.end[1],animation.ease),findChange(animation.start[2],animation.stepIndex,animation.steps,animation.stepDelta[2],animation.end[2],animation.ease)]);break;default:animation.elm.style[animation.property]=thisStep+"px";break}if((animation.steps>animation.stepIndex)&&(bevey.hasClass(animation.elm,"animating"))){animation.onTween();setTimeout(function(){bevey.animate(animation)},animation.interval)}else{if(animation.property.indexOf("color")!==-1){animation.stepIndex=0}bevey.removeClass(animation.elm,"animating");animation.onComplete()}return animation},ajax:{cache:[],request:function(ajaxRequest){ajaxRequest.method=ajaxRequest.method||"GET";ajaxRequest.onStart=ajaxRequest.onStart||function(){};ajaxRequest.onComplete=ajaxRequest.onComplete||function(){};if(ajaxRequest.cache!==false){ajaxRequest.cache=true}var request,ajaxProcess;ajaxProcess=function(){ajaxRequest.onStart();switch(typeof(ajaxRequest.onComplete)){case"object":if(ajaxRequest.onComplete.value){ajaxRequest.onComplete.value=ajaxRequest.response}else{if(ajaxRequest.onComplete.childNodes[0]){bevey.putText(ajaxRequest.onComplete,ajaxRequest.response)}}break;case"function":ajaxRequest.onComplete();break}};if((bevey.ajax.cache[ajaxRequest.path+"?"+ajaxRequest.param+"?"]!==undefined)&&(ajaxRequest.cache)){ajaxRequest.response=bevey.ajax.cache[ajaxRequest.path+"?"+ajaxRequest.param+"?"];ajaxProcess();return true}if(window.XMLHttpRequest){request=new XMLHttpRequest()}else{if(window.ActiveXObject){request=new ActiveXObject("Microsoft.XMLHTTP")}else{return false}}if(ajaxRequest.method==="GET"){ajaxRequest.path=ajaxRequest.path+"?"+ajaxRequest.param;ajaxRequest.param=""}request.open(ajaxRequest.method.toUpperCase(),ajaxRequest.path,true);if(ajaxRequest.method==="POST"){request.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}request.setRequestHeader("AJAX","true");bevey.event.add(request,"readystatechange",function(){if(request.readyState===4){if(request.status===200){ajaxRequest.response=request.responseText;if(ajaxRequest.cache){bevey.ajax.cache[ajaxRequest.path+"?"+ajaxRequest.param]=ajaxRequest.response}ajaxProcess()}else{return false}}});request.send(ajaxRequest.param)}},externalLinks:function(elm){elm=elm||document;var links=elm.getElementsByTagName("a"),i=0;for(i;i<links.length;i+=1){if(/(?:^|\s)external(?:\s|$)/.test(links[i].rel)){links[i].target="_blank"}}},findMousePosition:function(e){if(e.touches&&e.touches.length){return{positionX:e.touches[0].clientX,positionY:e.touches[0].clientY}}else{if(window.event){return{positionX:event.clientX,positionY:event.clientY}}else{return{positionX:e.clientX,positionY:e.clientY}}}},clickDrag:function(drag){drag.dragElm=drag.dragElm||drag.elm;drag.restrict=drag.restrict||false;drag.onStart=drag.onStart||function(){};drag.onTween=drag.onTween||function(){};drag.onComplete=drag.onComplete||function(){};drag.onDrop=drag.onDrop||function(){};var mover,dropper,dropable,start=(typeof(document.body.ontouchstart)==="undefined")?"mousedown":"touchstart",move=(typeof(document.body.ontouchmove)==="undefined")?"mousemove":"touchmove",end=(typeof(document.body.ontouchend)==="undefined")?"mouseup":"touchend",wrapperBorderOffsetX=bevey.findStyle(drag.elm.parentNode,"border-left-width")+bevey.findStyle(drag.elm.parentNode,"border-right-width"),wrapperBorderOffsetY=bevey.findStyle(drag.elm.parentNode,"border-top-width")+bevey.findStyle(drag.elm.parentNode,"border-bottom-width");mover=function(e){if(bevey.hasClass(drag.elm,"active")){bevey.cancelBubble(e);if(e.preventDefault){e.preventDefault()}var position=bevey.findMousePosition(e),positionX=position.positionX,positionY=position.positionY,width=drag.dragElm.offsetWidth,height=drag.dragElm.offsetHeight,endX,endY;drag.newX=positionX-drag.clickOffsetX+drag.startOffsetX-(drag.startWidth-bevey.findScroll().positionX);drag.newY=positionY-drag.clickOffsetY+drag.startOffsetY-(drag.startHeight-bevey.findScroll().positionY);if(drag.restrict){endX=drag.elm.parentNode.offsetWidth-width-wrapperBorderOffsetX;endY=drag.elm.parentNode.offsetHeight-height-wrapperBorderOffsetY;if(drag.newX>endX){drag.newX=endX}if(drag.newX<0){drag.newX=0}if(drag.newY>endY){drag.newY=endY}if(drag.newY<0){drag.newY=0}}if(drag.dropElm){dropable(drag)}drag.elm.style.margin=0;drag.elm.style.left=drag.newX+"px";drag.elm.style.top=drag.newY+"px";drag.onTween();return false}};dropper=function(e){if(bevey.hasClass(drag.elm,"active")){bevey.removeClass(drag.elm,"active");if(drag.dropElm){dropable(drag,true)}bevey.event.remove(document,"mousemove",mover);bevey.event.remove(document,"mouseup",dropper);drag.onComplete()}};dropable=function(drag,drop){var i=0,temp,dropBox,offset,dropX,dropY,dragWidth,dragHeight,dropWidth,dropHeight,canDrop=false;if(drag.dropElm.length===undefined){temp=drag.dropElm;drag.dropElm=[];drag.dropElm[0]=temp;temp=drag.onDrop;drag.onDrop=[];drag.onDrop[0]=temp}for(i;i<drag.dropElm.length;i+=1){dropBox=drag.dropElm[i];offset=bevey.totalOffset(dropBox,true);dropX=offset.offsetX;dropY=offset.offsetY;dragWidth=drag.elm.offsetWidth;dragHeight=drag.elm.offsetHeight;dropWidth=dropBox.offsetWidth;dropHeight=dropBox.offsetHeight;if(((drag.newX>parseInt(dropX-30,10))&&(drag.newX<parseInt(dropX+dropBox.offsetWidth-10,10)))&&((drag.newY>parseInt(dropY-30,10))&&(drag.newY<parseInt(dropY+dropBox.offsetHeight-10,10)))){canDrop=true;drag.activeDropBox=dropBox;bevey.addClass(dropBox,"active");drag.newX=dropX;drag.newY=dropY;if(dropWidth>dragWidth){drag.newX+=(dropWidth-dragWidth)/2}if(dropHeight>dragHeight){drag.newY+=(dropHeight-dragHeight)/2}if(drop){bevey.removeClass(dropBox,"active");drag.onDrop[i](drag.elm)}}else{bevey.removeClass(dropBox,"active")}}if(canDrop===true){bevey.addClass(drag.elm,"dropable")}else{bevey.removeClass(drag.elm,"dropable")}};bevey.event.add(drag.dragElm,start,function(e){var startOffset=bevey.findMousePosition(e);bevey.clickDrag.zindex=bevey.clickDrag.zindex||99;bevey.cancelBubble(e);drag.clickOffsetX=startOffset.positionX;drag.clickOffsetY=startOffset.positionY;drag.startOffsetX=drag.elm.offsetLeft;drag.startOffsetY=drag.elm.offsetTop;drag.startWidth=bevey.findScroll().positionX;drag.startHeight=bevey.findScroll().positionY;drag.elm.style.zIndex=bevey.clickDrag.zindex+=1;drag.elm.style.margin=0;drag.elm.style.bottom="auto";drag.elm.style.right="auto";drag.elm.style.position="absolute";bevey.addClass(drag.elm,"active");drag.onStart();if(e.preventDefault){e.preventDefault()}bevey.event.add(document,move,mover);bevey.event.add(document,end,dropper);mover(e)})},resize:function(resize){var restrictParent=resize.restrict,dragElm=document.createElement("div"),parentBorderOffsetX=bevey.findStyle(resize.elm,"border-left-width")+bevey.findStyle(resize.elm,"border-right-width"),parentBorderOffsetY=bevey.findStyle(resize.elm,"border-top-width")+bevey.findStyle(resize.elm,"border-bottom-width"),wrapperBorderOffsetX=bevey.findStyle(resize.elm.parentNode,"border-left-width")+bevey.findStyle(resize.elm.parentNode,"border-right-width"),wrapperBorderOffsetY=bevey.findStyle(resize.elm.parentNode,"border-top-width")+bevey.findStyle(resize.elm.parentNode,"border-bottom-width"),parentHeight=resize.elm.offsetHeight,parentWidth=resize.elm.offsetWidth;resize.restrict=false;resize.onStart=resize.onStart||function(){};resize.onComplete=resize.onComplete||function(){};resize.elm.appendChild(dragElm);bevey.addClass(dragElm,"resize");dragElm.style.left=parentWidth-dragElm.offsetWidth-parentBorderOffsetX+"px";dragElm.style.top=parentHeight-dragElm.offsetHeight-parentBorderOffsetY+"px";resize.elm=dragElm;resize.onTween=function(){var containerWidth=resize.elm.parentNode.parentNode.offsetWidth,containerHeight=resize.elm.parentNode.parentNode.offsetHeight,width=bevey.stripUnits(resize.elm.style.left)+dragElm.offsetWidth,height=bevey.stripUnits(resize.elm.style.top)+dragElm.offsetHeight,parentLeft=resize.elm.parentNode.offsetLeft,parentTop=resize.elm.parentNode.offsetTop;if((width>dragElm.offsetWidth)&&((!restrictParent)||((width<(containerWidth-parentLeft-parentBorderOffsetX-wrapperBorderOffsetX))))){resize.elm.parentNode.style.width=width+"px"}else{if(width>=(containerWidth-parentLeft-parentBorderOffsetX-wrapperBorderOffsetX)){resize.elm.parentNode.style.width=resize.elm.parentNode.parentNode.offsetWidth-resize.elm.parentNode.offsetLeft-parentBorderOffsetX-wrapperBorderOffsetX+"px";resize.elm.style.left=resize.elm.parentNode.offsetWidth-dragElm.offsetWidth-parentBorderOffsetX+"px"}}if((height>dragElm.offsetHeight)&&((!restrictParent)||(height<(containerHeight-parentTop-parentBorderOffsetY-wrapperBorderOffsetY)))){resize.elm.parentNode.style.height=height+"px"}else{if(height>=(containerHeight-parentTop-parentBorderOffsetY-wrapperBorderOffsetY)){resize.elm.parentNode.style.height=resize.elm.parentNode.parentNode.offsetHeight-resize.elm.parentNode.offsetTop-parentBorderOffsetY-wrapperBorderOffsetY+"px";dragElm.style.top=resize.elm.parentNode.offsetHeight-dragElm.offsetHeight-parentBorderOffsetY+"px"}}if(width<=dragElm.offsetWidth){resize.elm.parentNode.style.width=dragElm.offsetWidth+"px";dragElm.style.left=0}if(height<=dragElm.offsetHeight){resize.elm.parentNode.style.height=dragElm.offsetHeight+"px";dragElm.style.top=0}};bevey.clickDrag(resize)},rotator:{rotate:function(rotator){rotator.onComplete=rotator.onComplete||function(){};var imageFetch,animation;if(rotator.index===undefined){rotator.index=0;rotator.last=0}if((rotator.wrap)&&((rotator.index+1)>=rotator.photos.length)){rotator.last=rotator.index;rotator.index=0}else{if(rotator.wrap){rotator.last=rotator.index;rotator.index+=1}else{if(((rotator.bounce)&&(rotator.index===0))||((rotator.bounce)&&((rotator.index+1)<rotator.photos.length)&&(rotator.index>=rotator.last))||((rotator.direction==="next")&&((rotator.index+1)<rotator.photos.length))){rotator.last=rotator.index;rotator.index+=1;if((rotator.index+1)<rotator.photos.length){imageFetch=new Image();imageFetch.index=rotator.index+1}}else{if(((rotator.bounce)||(rotator.direction==="prev"))&&(rotator.index>0)){rotator.last=rotator.index;rotator.index-=1;if(rotator.index>0){imageFetch=new Image();imageFetch.index=rotator.index-1}}else{return false}}}}if(imageFetch){if(typeof(rotator.photos[imageFetch.index])==="object"){imageFetch.src=rotator.photos[imageFetch.index].src}else{imageFetch.src=rotator.photos[imageFetch.index]}}animation={elm:rotator.elm,duration:250,start:1,end:0,property:"opacity",onComplete:function(){rotator.elm.style.display="block";if(typeof(rotator.photos[rotator.index])==="object"){rotator.elm.src=rotator.photos[rotator.index].src;rotator.elm.alt=rotator.photos[rotator.index].alt}else{if(rotator.alt){rotator.elm.alt=rotator.alt[rotator.index]}rotator.elm.src=rotator.photos[rotator.index]}animation={elm:rotator.elm,duration:250,start:0,end:1,property:"opacity"};setTimeout(function(){bevey.animate(animation)},250);rotator.onComplete()}};bevey.animate(animation)},auto:function(rotator){rotator.interval=rotator.interval||5000;rotator.index=rotator.index||0;rotator.autoIndex=rotator.autoIndex||0;rotator.bounce=rotator.bounce||false;rotator.onStart=rotator.onStart||function(){};rotator.onTween=rotator.onTween||function(){};if(rotator.wrap!==false){rotator.wrap=true}if(rotator.autoIndex===0){bevey.event.add(rotator.elm,"mouseenter",function(){rotator.pause=true});bevey.event.add(rotator.elm,"mouseleave",function(){if(rotator.pause===true){rotator.pause=false}})}if((rotator.autoIndex)&&(rotator.pause!==true)){bevey.rotator.rotate(rotator)}rotator.autoIndex+=1;setTimeout(function(){rotator.onStart();bevey.rotator.auto(rotator);rotator.onTween()},rotator.interval)},control:function(rotator){rotator.index=rotator.index||0;rotator.onStart=rotator.onStart||function(){};rotator.onComplete=rotator.onComplete||function(){};var prev,next,navAction,i=0,linkCheck;navAction=function(e){var elm=bevey.getTarget(e);if(elm.tagName.toLowerCase()==="a"){if(bevey.hasClass(elm,"prev")){rotator.direction="prev"}else{if(bevey.hasClass(elm,"next")){rotator.direction="next"}}rotator.onStart();bevey.rotator.rotate(rotator);linkCheck();rotator.onComplete()}e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}if(e.preventDefault){e.preventDefault()}return false};linkCheck=function(){if(rotator.index<=0){bevey.addClass(prev,"disabled");prev.href="#"}else{bevey.removeClass(prev,"disabled");if(typeof(rotator.photos[(rotator.index-1)])==="object"){prev.href=rotator.photos[(rotator.index-1)].src}else{prev.href=rotator.photos[(rotator.index-1)]}}if((rotator.index+1)>=rotator.photos.length){bevey.addClass(next,"disabled");next.href="#"}else{bevey.removeClass(next,"disabled");if(typeof(rotator.photos[(rotator.index+1)])==="object"){next.href=rotator.photos[(rotator.index+1)].src}else{next.href=rotator.photos[(rotator.index+1)]}}};if(rotator.elm.parentNode.getElementsByTagName("a").length){prev=bevey.getElementsByClassName("prev",rotator.elm.parentNode,"a")[0];next=bevey.getElementsByClassName("next",rotator.elm.parentNode,"a")[0];for(i;i<bevey.event.list.length;i+=1){if((bevey.event.list[i])&&(bevey.event.list[i][0]===rotator.elm.parentNode)&&(bevey.event.list[i][1]==="click")){bevey.event.remove(rotator.elm.parentNode,"click",bevey.event.list[i][2])}}bevey.event.add(rotator.elm.parentNode,"click",navAction)}else{prev=document.createElement("a");next=document.createElement("a");bevey.addClass(prev,"prev");bevey.putText(prev,"Previous Image");bevey.addClass(next,"next");bevey.putText(next,"Next Image");rotator.elm.parentNode.appendChild(prev);rotator.elm.parentNode.appendChild(next);bevey.event.add(rotator.elm.parentNode,"click",navAction)}linkCheck()}},lightbox:function(lightbox){lightbox.onStart=lightbox.onStart||function(){};lightbox.onComplete=lightbox.onComplete||function(){};lightbox.images=lightbox.images||lightbox.elm.getElementsByTagName("img");var images=[],image,full,i=0,findSize;findSize=function(imageTag){if((imageTag.naturalWidth>0)&&(imageTag.naturalHeight>0)){imageTag.width=imageTag.naturalWidth;imageTag.height=imageTag.naturalHeight;imageTag.parentNode.style.width=imageTag.width+"px";imageTag.parentNode.style.height=imageTag.height+"px"}else{if((imageTag.complete!==false)&&(imageTag.width>0)&&(imageTag.height>0)){imageTag.parentNode.style.width=imageTag.width+"px";imageTag.parentNode.style.height=imageTag.height+"px"}else{setTimeout(function(){findSize(imageTag)},250)}}};for(i;i<lightbox.images.length;i+=1){image=new Image();image=lightbox.images[i];image.index=i;full=new Image();full.src=image.parentNode.href;full.alt=image.alt;images[i]=full}bevey.event.add(lightbox.elm,"click",function(e){if(bevey.getTarget(e).nodeName.toLowerCase()==="img"){var elm=bevey.getTarget(e),image=elm,fullImage=image.parentNode.href,caption=image.alt,overlay,content,curtain,imageContainer,imageWrapper,imageTag,captionTag,rotator;lightbox.onStart();if(bevey.hasClass(document.body.firstChild,"overlay")){overlay=document.body.firstChild;content=bevey.getElementsByClassName("content",overlay,"div")[0];overlay.style.display="block";bevey.setOpacity(overlay,1);imageWrapper=content.getElementsByTagName("div")[0];imageContainer=imageWrapper.getElementsByTagName("div")[0];imageTag=imageContainer.getElementsByTagName("img")[0];captionTag=imageContainer.nextSibling}else{overlay=document.createElement("div");bevey.addClass(overlay,"overlay");curtain=document.createElement("div");bevey.addClass(curtain,"curtain");overlay.appendChild(curtain);content=document.createElement("div");bevey.addClass(content,"content");imageContainer=document.createElement("div");imageWrapper=document.createElement("div");imageTag=document.createElement("img");captionTag=document.createElement("p");imageWrapper.appendChild(imageTag);imageContainer.appendChild(imageWrapper);imageContainer.appendChild(captionTag);content.appendChild(imageContainer);overlay.appendChild(content);bevey.event.add(imageContainer,"click",function(e){bevey.cancelBubble(e)});bevey.event.add(overlay,"click",function(){var overlayAnimation={elm:overlay,property:"opacity",duration:250,start:1,end:0,onComplete:lightbox.onComplete};bevey.animate(overlayAnimation)});bevey.insertFirst(overlay,document.body)}imageTag.src=fullImage;imageTag.alt=caption;bevey.putText(captionTag,caption);findSize(imageTag);overlay.style.height=bevey.findDocumentHeight()+"px";if(bevey.findStyle(content,"position")==="relative"){content.style.paddingTop=bevey.findScroll().positionY+"px"}else{if((imageTag.offsetHeight+85)>Math.min(document.body.clientHeight,document.documentElement.clientHeight)){content.style.position="absolute";content.style.paddingTop=bevey.findScroll().positionY+"px"}else{content.style.position="fixed";content.style.paddingTop=0}}rotator={elm:imageTag,photos:images,index:image.index,onComplete:function(){var tempImage=new Image();tempImage.src=rotator.elm.src;findSize(rotator.elm);overlay.style.height=bevey.findDocumentHeight()+"px";bevey.putText(rotator.elm.parentNode.nextSibling,rotator.elm.alt)}};bevey.rotator.control(rotator);if(e.preventDefault){e.preventDefault()}return false}})},lazyLoad:function(elm){elm=elm||document;var allImages,lazyImages=[],loadImages,setSrc,i=0;if(elm.nodeName){allImages=elm.getElementsByTagName("img")}else{allImages=elm}loadImages=function(){var scroll,i=lazyImages.length-1;if(lazyImages.length){scroll=bevey.findScroll().positionY+Math.min(document.body.clientHeight,document.documentElement.clientHeight);for(i;i>=0;i-=1){if(lazyImages[i].offsetTop<scroll){lazyImages[i].src=lazyImages[i].getAttribute("data-src");lazyImages.splice(i,1)}}}};setSrc=function(image){image.setAttribute("data-src",image.src);image.src="#"};for(i;i<allImages.length;i+=1){if(allImages[i].offsetTop>Math.min(document.body.clientHeight,document.documentElement.clientHeight)){if(!allImages[i].complete){lazyImages.push(allImages[i]);bevey.closure(allImages[i],setSrc(allImages[i]))}}}if(lazyImages.length>0){bevey.event.add(window,"scroll",function(){loadImages()});bevey.event.add(window,"resize",function(){loadImages()})}loadImages()},carousel:function(elm){elm=elm||document;var carouselTemp,carousel,i=0,j,carousels=bevey.getElementsByClassName("carousel-wrap",elm,"div"),movePrev,moveNext;movePrev=function(carousel){return function(){if(carousel.currPane>0){bevey.removeClass(carousel.navNext,"carousel-disabled");var animation={elm:carousel.parent,duration:500,start:parseInt(carousel.currPane*carousel.paneStep*-1,10),end:parseInt(carousel.currPane*carousel.paneStep*-1,10)+carousel.paneStep,property:"left",ease:"ease-out",onStart:function(){carousel.currPane=carousel.currPane-1;if(carousel.currPane<=0){bevey.addClass(carousel.navPrev,"carousel-disabled")}else{bevey.removeClass(carousel.navPrev,"carousel-disabled")}}};bevey.animate(animation)}}};moveNext=function(carousel){return function(){if(carousel.currPane<carousel.panes.length-1){bevey.removeClass(carousel.navPrev,"carousel-disabled");var animation={elm:carousel.parent,duration:500,start:parseInt(carousel.currPane*carousel.paneStep*-1,10),end:parseInt(carousel.currPane*carousel.paneStep*-1,10)-carousel.paneStep,property:"left",ease:"ease-out",onStart:function(){carousel.currPane+=1;if(carousel.currPane>=carousel.panes.length-1){bevey.addClass(carousel.navNext,"carousel-disabled")}else{bevey.removeClass(carousel.navNext,"carousel-disabled")}}};bevey.animate(animation)}}};for(i;i<carousels.length;i+=1){carouselTemp=bevey.getElementsByClassName("carousel",carousels[i],"ul");carousel={parent:carouselTemp[0],panes:bevey.getElementsByClassName("pane",carouselTemp[0],"li"),totalWidth:0,currPane:0,paneStep:0,navPrev:document.createElement("a"),navNext:document.createElement("a")};for(j=0;j<carousel.panes.length;j+=1){carousel.totalWidth=carousel.totalWidth+carousel.panes[i].offsetWidth;carousel.paneStep=carousel.panes[i].offsetWidth}carousel.parent.style.width=carousel.totalWidth+"px";carousel.navPrev.href="#";carousel.navPrev.title="Previous pane in carousel";bevey.cancelLink(carousel.navPrev);bevey.addClass(carousel.navPrev,"carousel-prev");bevey.addClass(carousel.navPrev,"carousel-disabled");carousels[i].appendChild(carousel.navPrev);carousel.navNext.href="#";carousel.navNext.title="Next pane in carousel";bevey.cancelLink(carousel.navNext);bevey.addClass(carousel.navNext,"carousel-next");carousels[i].appendChild(carousel.navNext);bevey.event.add(carousel.navPrev,"click",bevey.closure(carousel,movePrev(carousel)));bevey.event.add(carousel.navNext,"click",bevey.closure(carousel,moveNext(carousel)))}},autoComplete:function(autoComplete){autoComplete.onStart=autoComplete.onStart||function(){};autoComplete.onComplete=autoComplete.onComplete||function(){};autoComplete.preText=autoComplete.preText||"Your list of responses will show up here";autoComplete.noResultText=autoComplete.noResultText||"No matches found";autoComplete.param=autoComplete.param||"";if(autoComplete.param){autoComplete.param="&"+autoComplete.param}autoComplete.elm.setAttribute("autocomplete","off");var container=document.createElement("div"),anchor=document.createElement("a"),list=document.createElement("ul"),item=document.createElement("li"),reply,newKey;if(!autoComplete.external){autoComplete.external=true}bevey.addClass(anchor,"closeResults");bevey.addClass(container,"noResults");bevey.putText(item,autoComplete.preText);container.appendChild(anchor);container.appendChild(list);list.appendChild(item);autoComplete.elm.parentNode.appendChild(container);bevey.event.add(anchor,"click",function(){bevey.addClass(container,"noResults")});newKey=function(elm,index){var date=new Date(),time=date.getTime(),input=elm.value,newItem,ajaxRequest,item,link,caption;index=index||0;autoComplete.time=autoComplete.time||0;setTimeout(function(){if(((time-2000)>autoComplete.time)&&(input.length>3)){index+=1;newKey(elm,index)}},2000);if(index&&input){autoComplete.onStart();bevey.addClass(elm,"active");ajaxRequest={path:autoComplete.path,param:"q="+input+autoComplete.param,method:"GET",onComplete:function(){var i=0,property,templateItem,template;if(ajaxRequest.response!=="[]"){bevey.removeClass(container,"noResults");if(typeof(JSON)==="object"){reply=JSON.parse(ajaxRequest.response)}else{reply=eval("("+ajaxRequest.response+")")}for(i;i<reply.length;i+=1){if(autoComplete.template){template=autoComplete.template;property="";templateItem=document.createElement("li");for(property in reply[i]){if(reply[i].hasOwnProperty(property)){while(template.indexOf("["+property+"]")!==-1){template=template.replace("["+property+"]",reply[i][property])}}}templateItem.innerHTML=template;list.appendChild(templateItem)}else{item=document.createElement("li");link=document.createElement("a");caption=document.createElement("span");link.setAttribute("href",reply[i].clickUrl);if(autoComplete.external){link.setAttribute("rel","external");link.target="_blank"}bevey.putText(link,reply[i].url);bevey.putText(caption,reply[i].title);item.appendChild(link);item.appendChild(caption);list.appendChild(item)}}}else{bevey.removeChildren(list);newItem=document.createElement("li");bevey.putText(newItem,autoComplete.noResultText);bevey.addClass(container,"noResults");list.appendChild(newItem)}bevey.removeClass(elm,"active");autoComplete.onComplete()}};autoComplete.time=time;bevey.removeChildren(list);bevey.ajax.request(ajaxRequest)}};bevey.event.add(autoComplete.elm,"keyup",bevey.closure(autoComplete.elm,function(){newKey(autoComplete.elm)}))},formDefault:function(input,text){var elm,labels,i=0,textNode;if(typeof(input)==="string"){elm=document.getElementById(input)}else{elm=input}if(elm!==null){if(text===undefined){text="";labels=elm.parentNode.getElementsByTagName("label");for(i;i<labels.length;i+=1){if(labels[i].htmlFor){textNode=labels[i].childNodes[0];if(textNode!==null){text=textNode.nodeValue}break}}}bevey.event.add(elm,"focus",function(){if(elm.value===text){elm.value=""}});bevey.event.add(elm,"blur",function(){elm.value=bevey.trim(elm.value);if(elm.value===""){elm.value=text}});elm.value=bevey.trim(text)}},formFocus:function(elm){var removeHidden,focusNext,checkFocus,inputs,i=0;elm=elm||document;removeHidden=function(inputs){var newInputs=[],j=0,i=0;for(i;i<inputs.length;i+=1){if(inputs[i].type!=="hidden"){newInputs[j]=inputs[i];j+=1}}return newInputs};focusNext=function(input){var i=0,parentForm=input.form,formInputs=removeHidden(parentForm.getElementsByTagName("input"));for(i;(i+1)<formInputs.length;i+=1){if(formInputs[i]===input){if(formInputs[i+1].type!=="hidden"){formInputs[i+1].focus()}}}};checkFocus=function(elm){return function(elm){if(elm.value.length>=elm.maxLength){focusNext(elm)}}};inputs=removeHidden(elm.getElementsByTagName("input"));for(i;i<inputs.length;i+=1){if(inputs[i].maxLength>0){bevey.event.add(inputs[i],"keyup",bevey.closure(inputs[i],checkFocus(inputs[i])))}}},tabs:function(tabs){tabs=tabs||[];tabs.elm=tabs.elm||document;tabs.onStart=tabs.onStart||function(){};tabs.onComplete=tabs.onComplete||function(){};if(tabs.animate!==false){tabs.animate=true}var tabSets=bevey.getElementsByClassName("tabs",tabs.elm,"ul"),i=0,changeTab;changeTab=function(){return function(e){var elm=bevey.getTarget(e),tabSet,paneSet,index,animation,j=0;while(elm.nodeName.toLowerCase()!=="li"){elm=elm.parentNode}tabSet=elm.parentNode.getElementsByTagName("li");paneSet=bevey.getElementsByClassName("panes",elm.parentNode.parentNode,"ul");paneSet=paneSet[0].getElementsByTagName("li");tabs.onStart();for(j;j<tabSet.length;j+=1){if(tabSet[j]===elm){index=j}else{bevey.removeClass(tabSet[j],"selected");bevey.removeClass(paneSet[j],"selected")}}if(tabs.animate){if(!bevey.hasClass(paneSet[index],"selected")){bevey.setOpacity(paneSet[index],0);animation={elm:paneSet[index],property:"opacity",start:0,end:1,duration:250,noNative:true,onComplete:function(){paneSet[index].style.display="";tabs.onComplete()}};bevey.animate(animation)}}bevey.addClass(tabSet[index],"selected");bevey.addClass(paneSet[index],"selected");if(e.preventDefault){e.preventDefault()}return false}};for(i;i<tabSets.length;i+=1){bevey.event.add(tabSets[i],"click",changeTab())}},zoomer:function(direction){var currentSize=bevey.findStyle(document.body,"font-size")||12;if(direction===undefined){currentSize=bevey.readCookie("zoomer")||currentSize}if(direction==="down"){currentSize-=1}else{if(direction==="up"){currentSize+=1}}if((currentSize!==undefined)&&(currentSize<40)&&(currentSize>8)){document.body.style.fontSize=currentSize+"px";document.cookie="zoomer="+currentSize+"; path=/"}},init:function(){bevey.lazyLoad();bevey.addClass(document.body,"rich");bevey.externalLinks();bevey.tabs();bevey.carousel();if(typeof(init)==="function"){init()}}}}());if(document.addEventListener){document.addEventListener("DOMContentLoaded",bevey.init,false)}bevey.event.add(window,"load",function(){if(!document.addEventListener){bevey.init()}});bevey.event.add(window,"unload",function(){bevey.event.removeAll()});